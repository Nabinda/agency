//- views/admin/admin_dashboard.pug
extends admin_layout.pug

include mixins/mixins.pug

block head
  - var activePage = 'dashboard';
  style.
    /* Card Styles */
    .card {
      background-color: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 0.75rem;
      color: var(--text-light);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2);
      transition: border-color 0.3s ease;
    }
    .card-hover-admin:hover { border-color: var(--admin-color); }
    .btn-admin {
      background-color: var(--admin-color);
      border: none;
      color: white;
      padding: 0.6rem 1.2rem;
      border-radius: 0.5rem;
      font-weight: 500;
      display: inline-flex; align-items: center; justify-content: center;
    }
    .btn-admin:hover { background-color: #2563eb; color: white; }
    .icon-box { width: 42px; height: 42px; border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem; font-size: 1.2rem; }
    .icon-box-admin { background: rgba(59, 130, 246, 0.15); color: var(--admin-color); }
    .icon-box-green { background: rgba(16, 185, 129, 0.15); color: var(--accent-green); }
    .icon-box-yellow { background: rgba(245, 158, 11, 0.15); color: var(--accent-yellow); }
    .table { --bs-table-bg: transparent; --bs-table-hover-bg: rgba(255,255,255,0.03); }

block content
  //- Header
  .d-flex.justify-content-between.align-items-end.mb-4
    div
      h2.fw-bold.mb-1 Dashboard Overview
      p.text-muted.mb-0 Welcome back, Administrator.
    div
      button.btn.btn-admin(type="button", data-bs-toggle="modal", data-bs-target="#assignHoursModal")
        +icon('calendar-event', 'me-2')
        | Create New Shift

  //- Stats Row
  .row.g-4.mb-5
    .col-12.col-md-6.col-xl-3
      .card.card-hover-admin.h-100
        .card-body
          .icon-box.icon-box-admin
            +icon('user')
          h3.fw-bold.mb-1 #{employees ? employees.length : 0}
          p.text-muted.small.mb-0 Total Employees
    .col-12.col-md-6.col-xl-3
      .card.card-hover-admin.h-100
        .card-body
          .icon-box.icon-box-admin
            +icon('clock')
          h3.fw-bold.mb-1 4,320
          p.text-muted.small.mb-0 Hours Tracked (Jan)
    .col-12.col-md-6.col-xl-3
      .card.card-hover-admin.h-100
        .card-body
          .icon-box.icon-box-green
            +icon('money')
          h3.fw-bold.mb-1 $142k
          p.text-muted.small.mb-0 Payroll Forecast
    .col-12.col-md-6.col-xl-3
      .card.card-hover-admin.h-100
        .card-body
          .icon-box.icon-box-yellow
            +icon('alert')
          h3.fw-bold.mb-1 8
          p.text-muted.small.mb-0 Pending Requests

  //- Recent Activity Table
  h5.fw-bold.mb-3 Recent Activity
  .card
    .card-body.p-0
      .table-responsive
        table.table.table-dark.table-hover.mb-0
          thead
            tr.text-muted
              th.ps-4.py-3 Employee
              th.py-3 Action
              th.py-3 Time
              th.pe-4.py-3.text-end Status
          tbody
            tr.border-secondary.border-opacity-10
              td.ps-4.py-3
                .d-flex.align-items-center
                  div.rounded-circle.bg-secondary.bg-opacity-25.d-flex.align-items-center.justify-content-center.me-2(style="width:32px; height:32px; font-size: 0.8rem;") JS
                  | John Smith
              td.py-3 Clocked In
              td.py-3.text-muted 08:58 AM
              td.pe-4.py-3.text-end: span.badge.bg-success.bg-opacity-25.text-success On Time

  //- Include the Assign Hours Modal via mixin
  +assignHours(employees)
